[tox]
# These are the default environments that will be run
#   when ``tox`` is run without arguments.
envlist =
    py27
    py34
    py35
    py36
    py37
    pep8
    docs
skip_missing_interpreters = true

[flake8]
# Use the more relaxed max line length permitted in PEP8.
max-line-length = 99

# Enforce the Google Python style for grouping and sorting imports:
#   https://github.com/google/styleguide/blob/gh-pages/pyguide.md#313-imports-formatting
import-order-style = google

# Inform flake8-import-order plugin that `fact` should be treated as a local package name.
application-import-names = fact

# Speed up flake8 by ignoring large non-source directories.
exclude =
    .git,
    .tox,
    venv

[testenv]
deps =
    -r requirements.txt
    -r dev-requirements.txt
commands =
    # Use -bb to enable BytesWarnings as error to catch str/bytes misuse.
    # Use -Werror to treat warnings as errors.
    #   Must ignore DeprecationWarning until https://github.com/pytest-dev/pytest/issues/1403 is fixed.
    python -bb -Werror -Wignore::DeprecationWarning -m pytest --cov=fact --cov-report=html

[testenv:pep8]
deps =
    -r dev-requirements.txt
commands =
    flake8

[testenv:docs]
deps =
    -r dev-requirements.txt
changedir = docs
commands =
    sphinx-apidoc -o source/apidoc {toxinidir}/fact
    sphinx-build -W -b html source build
